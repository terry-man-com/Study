# データベース学習メモ
- リレーショナルデータベース：データを表（２次元的）に管理するデータベースのこと。
- リレーショナルデータベースではデータが重複すると可読性が落ちるので、重複しないようにする。そのために主キーを取り入れる。

- データベースの設計
    - 開発の流れ：要件定義→設計→実装→リリース　データベース設計は設計にあたる。
    - データベースの設計
        - 何をデータとして保存するのか？
            - システムで使用するもの（商品情報など）
            - ユーザーが登録するもの（氏名など）
            - **最初にやること**
                - データを抽出する
                - エンティティ（実態）を定義する
        - どのような形式で保存するのか？
            - **主キーが必要**
                - 値を指定すれば1行のレコードを特定できる
                - テーブル内に必ず1つだけ存在
                - テーブルは重複データを持てない
            - カラムの組み合わせ毎に行を追加する
                - **第一正規形**
                    - 正規形：一貫性と効率性を持った形でデータを保持するためのデータ形式
                    - 正規化：一貫性と効率性を持つようにデータベースを設計する。
                    - 第一正規形：1つのセルの中には1つの値しか含まない。
                - **関数従属性**
                    - 主キーが決まると他のカラムの値も決まること
                    - テーブル設計では全ての列が関数中属性を満たすように整理していく。
                - **第二正規形**
                    - 第一正規形から部分関数従属を排除
                    - 部分関数従属 = 主キーの一部に対して従属する列がある。
                    - テーブル分割でデータに矛盾がなくなる。
                - **第三正規形**
                    - 第二正規形から推移的関数従属を排除
                    - 推移的関数従属 = テーブル内に段階的な従属関係がある
                    - テーブル分割すると、他のデータと紐付かないデータも登録できる。
                - **ER図を用いて整理する**
                    - テーブルとテーブルを線でつなぎ、中身の種類と関係性を見やすくしたもの
                    - テーブル間の関係：１対１、１対多、多対多
                    - 多対多はテーブル設計上はNG
                        - 対策
                            - 中間テーブルを作る
                            - 1対多の関係となる。
                    - まとめ
                        - テーブルが増えていくと関係が分かりづらい
                        - ER図を使って整理される。
                        - テーブル間の関係は基本的には1対多
    - テーブル定義
        - テーブル名
            | カラム名 | データ型 | PK | NOT FULL | デフォルト |
            | ---- | ---- | ---- | ---- |---- |
            |  |  |  |  |  |

        - students（例）
            | カラム名 | データ型 | PK | NOT FULL | デフォルト |
            | ---- | ---- | ---- | ---- |---- |
            | id | INT | ◯ | ◯ |  |
            | name | VARCHAR(100) |  | ◯ |  |
            | faculty_id | INT |  | ◯ |  |

        - データ型（主要）
            - INT     ：整数を入れる列
            - VARCHAR ：文字列を入れる列
            - DATE    ：日付を入れる列
        - テーブル定義時のポイント
            - テーブル名、カラム名、データ型、PK、NOT NULL、デフォルトを考えればOK
            - 外部キー制約、ユニーク制約、チェック制約、オートインクリメントも考慮すれば完璧
    - テーブル定義後にやること
        - インデックスの設定（索引を入れる）：レスポンスを上げるため
        - パフォーマンスの向上（ボタンを押して、データの索引はとても時間がかかるので、そこを高速化できればサービスのパフォーマンスが向上する。）
    - まとめ：手順
    >> 論理設計　
        - データの抽出
        - エンティティの定義
        - 正規化
        - ER図
    >> 物理設計
        - テーブル定義
        - インデックス設計
    - まとめ：設計のポイント
        - 要件を満たすテーブル/カラムを作成する
        - 必要データはアプリケーションが決める
        - 要件定義をしっかり行う＆理解する
        - データに矛盾が生じないように正規化する。